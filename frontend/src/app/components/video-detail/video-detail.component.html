<div *ngIf="loading">
  <div>Učitava se...</div>
</div>

<div *ngIf="!loading && video">
  <div class="video-container">
    <video [src]="video.videoPath" controls autoplay></video>
  </div>

  <div class="video-info">
    <h2>{{ video.title }}</h2>
    <div class="video-meta">
        <span class="username" (click)="goToUser(video.user.username)">
        @{{ video.user.username }}
        </span>

        <span class="likes" (click)="onLikeClick()" title="Like video">
            <img src="assets/like.png" alt="like" style="cursor: pointer;">
        </span>
    </div>
    <p>{{ video.views }} pregleda | {{ video.createdAt | date:'d MMM y' }}</p>
    <p>{{ video.description }}</p>
  </div>

  <div *ngIf="!commentsLoading && comments.length > 0" class="comments-section">
    <div *ngFor="let comment of comments; trackBy: trackByCommentDate" class="comment-box">
      <div class="comment-header">
        <span class="comment-username" (click)="goToUser(comment.user.username)">
          @{{ comment.user.username }}
        </span>
        <span class="comment-date">{{ comment.createdAt | date:'d MMM y' }}</span>
      </div>
      <p class="comment-text">{{ comment.text }}</p>
    </div>
  </div>

  <div class="add-comment-box">
    <textarea 
      [(ngModel)]="commentTextValue"
      placeholder="Dodaj komentar..." 
      rows="2">
    </textarea>
    <button (click)="onSubmitComment()" type="button">Postavite</button>
  </div>
</div>

<div *ngIf="!loading && !video">
  <p>Video nije pronađen</p>
</div>
